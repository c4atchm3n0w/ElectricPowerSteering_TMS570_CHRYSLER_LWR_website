---
title: WdgM
linkTitle: WdgM
weight: 8
---

<p><strong>Module -- WdgM</strong></p>
<p><a href="#references">1 References <span>2</span></a></p>
<p><a href="#configuration-settings">2 Configuration Settings <span>2</span></a></p>
<p><a href="#naming-conventions">2.1 Naming Conventions <span>2</span></a></p>
<p><a href="#graphical-node-map-generation">2.2 Graphical Node Map Generation <span>2</span></a></p>
<p><a href="#known-issues-limitations-with-configuration">3 Known Issues / Limitations With Configuration <span>3</span></a></p>
<p><a href="#_Toc337038448">4 Integration <span>4</span></a></p>
<p><a href="#revision-control-log">5 Revision Control Log <span>4</span></a></p>
<h1 id="references">References</h1>
<ol type="1">
<li><p>Safe Watchdog Manager User Manual v1.7.0 (S-WdgM _UserManual.pdf)</p></li>
<li><p>Real-Time Interrupt (RTI) Module SPNUxxx-May 2011 (RTI_Gladiator.pdf)</p></li>
<li><p><strong>TBD</strong> – Placeholder for safety requirements dictating division of application software</p></li>
</ol>
<h1 id="configuration-settings">Configuration Settings</h1>
<h2 id="naming-conventions">Naming Conventions</h2>
<p>Naming conventions are used in the configuration of the module to:</p>
<ol type="1">
<li><p>Allow easy identification of the Local Transition and Global Transition configuration containers when configuring the BSW in Configurator</p></li>
<li><p>Provide an unambiguous link to the intended SWC Checkpoint to which the resulting generated port will be mapped. This convention facilitates:</p>
<ol type="a">
<li><p>Usage of the “Auto Map Service Ports” mapping feature in DaVinci Configurator after importing the generated WdgM SWC description.</p></li>
<li><p>Generation of an intuitive graphical view of the configuration via GraphViz (i.e. the nodes of the graph are labeled with the Checkpoint container names).</p></li>
</ol></li>
</ol>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Element</strong></th>
<th><strong>Convention</strong></th>
<th><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Supervised Entity</td>
<td>SE&lt;Entity Short Name&gt;</td>
<td>SE2msA</td>
</tr>
<tr class="even">
<td>Local Transition</td>
<td>LT_&lt;##&gt;</td>
<td><p>LT_01</p>
<p>Note that contiguous numbering is not required. Due to deletion of vectors, the number may become discontinuous.</p></td>
</tr>
<tr class="odd">
<td>Global Transition</td>
<td>GT_&lt;##&gt;</td>
<td><p>GT_01</p>
<p>Note that contiguous numbering is not required. Due to deletion of vectors, the number may become discontinuous.</p></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="graphical-node-map-generation">Graphical Node Map Generation</h2>
<p>Nexteer has extended the delivered generator to include generation of a graphical node map of the configuration. As there is no “comfort” view available for configuration, the task of visualizing the resultant configuration based on the numerous configuration containers is impossible except in extremely simple configurations.</p>
<p>The graphical node map generation relies on the Artt framework and GrapViz open source engine. Artt is included in the integration projects, however the installation of GraphViz and inclusion of the GraphViz utility on the system PATH variable must be performed by the developer on his/her local computer. GraphViz is available for download from <a href="http://www.graphviz.org/">http://www.graphviz.org/</a>.</p>
<p>The graphical output, WdgM_Graph.pdf, is generated in the folder along with the generated .h/.c files. Note that Adobe PDF reader locks any file that it has open from being modified, so if the WdgM_Graph.pdf is open in Adobe PDF reader and the generation process is run, the generation will fail. A solution to this issue is to download a PDF viewer that does not lock the file while it is opened (e.g. SumatraPDF).</p>
<h2 id="configuration-selection-rationale">Configuration Selection Rationale</h2>
<p>The configuration of the WdgM is intended to meet the requirements defined in [3].</p>
<h3 id="deadline-monitoring">Deadline Monitoring</h3>
<p>WdgM Deadline monitoring is not used to meet any of the requirements. As understood by the software team, the use of the WdgM deadline monitoring is not necessary to provide the “Deadline” monitoring defined in the requirements.</p>
<p>Deadline monitoring has the following limitations:</p>
<ol type="1">
<li><p>Deadlines are defined as the time to perform a single transition</p></li>
<li><p>The deadline is only evaluated if the associated transition is taken (i.e. if the initial checkpoint of the deadline monitored transition has multiple outgoing transitions, then in order for the deadline to be evaluated, the destination checkpoint of the deadline monitored transition must be executed before any of the other outgoing transition destination checkpoints.)</p>
<ol type="a">
<li><p>For the Nexteer EPS use case where the requirements define a “deadline” over an entire task chain:</p>
<ol type="i">
<li><p>Either the deadline monitored transition would need to be defined as a separate set of checkpoints to the checkpoints used for monitoring local/global task transitions.</p></li>
<li><p>Or the initial and final checkpoints of a task chain would need to be excluded from the local transition monitoring and used only for “deadline” monitoring.</p></li>
</ol></li>
</ol></li>
<li><p>A deadline is only evaluated when the destination checkpoint of the transition is reached (i.e. there is not cyclic check on the checkpoint time to detect when the deadline time has been exceeded, yet the destination checkpoint has not yet been reached.)</p>
<ol type="a">
<li><p>This means that a task that fails to activate will not be detected by deadline monitoring. Example failures are a task never finishing because of an infinite loop within the task or failure of the Os alarm operation for the task.</p></li>
<li><p>Although the requirements defined in [3] do not contain an explicit requirement for monitoring the cyclic execution of a set of checkpoints (i.e. execution frequency), verbal conversations with the FDD authors have provided the software team with the understanding that the intent of the “Deadline” requirement is to provide a monitoring solution that detects when the frequency of given checkpoint series has a period that is greater than the “Deadline” threshold stated. Additionally, the software group assumes that a frequency of execution that produces a period less than the “Deadline” threshold is desired to be detected. For this purpose, the software group has determined that Alive monitoring is the most straightforward method to provide the required monitoring/failure detection.</p></li>
</ol></li>
</ol>
<h3 id="alive-monitoring">Alive Monitoring</h3>
<p>Alive monitoring is used to meet the “Deadline” monitoring specified in the requirements. The concept of “Deadline” monitoring defined in the requirements shall be referred to as “Alive monitoring” from here forward to prevent confusion with the WdgM deadline monitoring.</p>
<p>Alive monitoring is performed by the WdgM_Mainfunction which is scheduled in a 4ms alarm activated task. The 4ms cyclic rate was selected to be less than the required system fail action time of 16ms(TBC), provide appropriate resolution for configured WdgM monitoring, and minimize the CPU throughput required.</p>
<p>Alive monitoring has the following limitations:</p>
<ol type="1">
<li><p>The cycle period measurement has a precision of the WdgM_Mainfunction call.</p>
<ol type="a">
<li><p>Due to a 4ms monitoring period the following non-optimal compromises were made.</p>
<ol type="i">
<li><p>The monitoring cycle of the 2ms task chain is 4ms with an expected 2 alive indications. This is deemed acceptable because…TBD</p></li>
<li><p>The monitoring cycle for the 10ms task chain is 40 ms with and expected 2 alive indications. This is deemed acceptable because…TBD</p></li>
</ol></li>
</ol></li>
<li><p>The WdgM monitoring period begins with the first call of the WdgM_Mainfunction, direct synchronization with the Alive monitor checkpoint is not provided.</p>
<ol type="a">
<li><p>Since all task alarms being monitored are started synchronously with the WdgM task alarm and all have a 0 tick offset, then the “cycle period monitored” by the WdgM main function for Alive monitoring will start synchronously with the alarm expirations. Given this, then the task execution jitter causing one monitor period to detect 2 alive monitor indications and the next period to detect 0 alive monitor indications is not a scenario that needs to be considered as valid (i.e. detecting this scenario as a failure meets the requirements).</p></li>
</ol></li>
<li><p>An initial checkpoint can be executed multiple times without causing a program violation. Given this, then placing the alive monitoring at a checkpoint that can only be executed once without violation detection is desired. The last checkpoint in the Task chain is selected for consistency.</p></li>
</ol>
<h3 id="local-transition-monitoring">Local Transition Monitoring</h3>
<h3 id="wdgmmode">WdgMMode</h3>
<table style="width:100%;">
<colgroup>
<col style="width: 36%" />
<col style="width: 29%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Attribute Name</strong></th>
<th><strong>Value</strong></th>
<th><strong>Rationale</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>WdgMExpiredSupervisionCycleTol</td>
<td>0</td>
<td>The EPS use case does not require a delay after failure detection to perform processing prior to activating the failure reaction, therefore, 0 is selected to perform the fail action in the same WdgM_Mainfunction call that confirms a failure exists.</td>
</tr>
<tr class="even">
<td>WdgMModeId</td>
<td>0</td>
<td>This is the only mode configured, so it is the first Id value, 0.</td>
</tr>
<tr class="odd">
<td>WdgMTicksPerSecond</td>
<td>1000000</td>
<td>TBC. Although the deadline monitoring feature which uses this timer is not configured, and the requirements in [3] are not clear on the accuracy of time measurement required, it is assumed by the software team that a resolution of 1uS is sufficient.</td>
</tr>
<tr class="even">
<td>WdgMSupervisionCycle</td>
<td>0.004</td>
<td>The WdgM_Mainfunction is scheduled at 4ms, see rationale stated earlier in this document for selection of 4ms.</td>
</tr>
<tr class="odd">
<td>WdgMInitialTriggerModeId</td>
<td>0</td>
<td>0 is the Id of the WdgMTrigger definition which triggers the TMS570 Hardware DWWD. This is the only defined WdgMTrigger and therefore must be the initial trigger mode.</td>
</tr>
<tr class="even">
<td colspan="3">WdgMLocalStatusParams_SE0</td>
</tr>
<tr class="odd">
<td>WdgMFailedSupervisionRefCycleTol</td>
<td>0</td>
<td>[3] requires no tolerance for alive failures. Per [1] §4.4.2, 0 accomplishes the required functionality.</td>
</tr>
<tr class="even">
<td>WdgMSupervisedEntityInitialMode</td>
<td>WDGM_LOCAL_STATUS_OK</td>
<td>TBD</td>
</tr>
<tr class="odd">
<td>WdgMFailedDeadlineRefCycleTol</td>
<td>0</td>
<td><p>[3] requires no tolerance for failures. Per [1] §4.1.9, 0 accomplishes the required functionality.</p>
<p>(note that deadline monitoring is unused in EPS system)</p></td>
</tr>
<tr class="even">
<td>WdgMDeadlineReferenceCycle</td>
<td>0</td>
<td><p>[3] requires no tolerance for failures. Per [1] §4.1.9, 0 accomplishes the required functionality.</p>
<p>(note that deadline monitoring is unused in EPS system)</p></td>
</tr>
<tr class="odd">
<td>WdgMFailedProgramFlowRefCycleTol</td>
<td>0</td>
<td>[3] requires no tolerance for program flow failures. Per [1] §4.1.9, 0 accomplishes the required functionality.</td>
</tr>
<tr class="even">
<td>WdgMProgramFlowReferenceCycle</td>
<td>1</td>
<td>Per [1] §4.1.9, 1 configures the WdgM to check the results of the program flow supervision at every MainFunction cycle.</td>
</tr>
<tr class="odd">
<td>WdgMLocalStatusSupervisedEntityRef</td>
<td>CntrlPath_SE0</td>
<td></td>
</tr>
<tr class="even">
<td colspan="3">WdgMTrigger</td>
</tr>
<tr class="odd">
<td>WdgMWatchdogMode</td>
<td>WDGIF_SLOW_MODE</td>
<td>TBD</td>
</tr>
<tr class="even">
<td>WdgMTriggerConditionValue</td>
<td>6</td>
<td>TBD</td>
</tr>
<tr class="odd">
<td>WdgMTriggerWindowStart</td>
<td>2</td>
<td>TBD</td>
</tr>
<tr class="even">
<td>WdgMTriggerModeId</td>
<td>0</td>
<td>This parameter is currently unused by the TTTech implementation per the “Hover over” note viewable in Configurator.</td>
</tr>
<tr class="odd">
<td>WdgMTriggerWatchdogRef</td>
<td>WdgMWatchdog</td>
<td>This a reference to the only configured watchdog in the EPS system.</td>
</tr>
</tbody>
</table>
<h4 id="wdgmgeneral">WdgMGeneral</h4>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 38%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Attribute Name</strong></th>
<th><strong>Value</strong></th>
<th><strong>Rationale</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>WdgMDevErrorDetect</td>
<td>False</td>
<td>Only needs to be enabled in debug builds for troubleshooting issues with the WdgM configuration and use. Disabled for release configuration to save ROM.</td>
</tr>
<tr class="even">
<td>WdgMDemReport</td>
<td>False</td>
<td>The EPS use case has no need for this feature. Disabling to eliminate any additional safety analysis related to this feature being enabled.</td>
</tr>
<tr class="odd">
<td>WdgMImmediateReset</td>
<td>True</td>
<td>Enabled for EPS so that the BAD Key status would be present in the watchdog status register after reset, which is used to set the proper NTC.</td>
</tr>
<tr class="even">
<td>WdgMOffModeEnabled</td>
<td>False</td>
<td>The EPS use case has no need for this feature. Disabling to eliminate any additional safety analysis related to this feature being enabled.</td>
</tr>
<tr class="odd">
<td>WdgMVersionInfoApi</td>
<td>False</td>
<td>The EPS use case has no need for “VersionInfoApi”.</td>
</tr>
<tr class="even">
<td>WdgMDefensiveBehavior</td>
<td>True</td>
<td>TBD</td>
</tr>
<tr class="odd">
<td>WdgMUseRte</td>
<td>True</td>
<td>EPS uses the WdgM in the context of the RTE for checkpoint calls.</td>
</tr>
<tr class="even">
<td>WdgMDemSupervisionReport</td>
<td>False</td>
<td>The EPS use case has no need for this feature. Disabling to eliminate any additional safety analysis related to this feature being enabled.</td>
</tr>
<tr class="odd">
<td>WdgMFirstAliveCounterReset</td>
<td>True</td>
<td>Required to prevent first execution of WdgM MainFunction from detecting a failure against alive supervisions that have a reference cycle of 1.</td>
</tr>
<tr class="even">
<td>WdgMUseOsSuspendInterrupt</td>
<td>True</td>
<td>TBD</td>
</tr>
<tr class="odd">
<td>WdgMTimebaseSource</td>
<td>WDGM_INTERNAL_HARDWARE_TICK</td>
<td>TBD</td>
</tr>
<tr class="even">
<td>WdgMSecondResetPath</td>
<td>False</td>
<td>TBD</td>
</tr>
<tr class="odd">
<td>WdgMTickOverrunCorrection</td>
<td>True</td>
<td>TBD</td>
</tr>
<tr class="even">
<td>WdgMEntityDeactivationEnabled</td>
<td>False</td>
<td>The EPS use case has no need for this feature. Disabling to eliminate any additional safety analysis related to this feature being enabled.</td>
</tr>
<tr class="odd">
<td>WdgMGlobalStateChangeCbk</td>
<td>none</td>
<td>No EPS use case for this notification</td>
</tr>
<tr class="even">
<td>WdgMStateChangeNotification</td>
<td>False</td>
<td>No EPS use case for this notification</td>
</tr>
<tr class="odd">
<td>WdgMGlobalMemoryAppTaskRef</td>
<td>ASIL_D</td>
<td>This is the only application configured in the project at this time.</td>
</tr>
<tr class="even">
<td colspan="3">WdgMCallerIds</td>
</tr>
<tr class="odd">
<td>WdgMCallerId</td>
<td>0</td>
<td>TBD</td>
</tr>
<tr class="even">
<td colspan="3">TO BE COMPLETED….</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="known-issues-limitations-with-configuration">Known Issues / Limitations With Configuration</h1>
<ol type="1">
<li><p>None</p></li>
</ol>
<h1 id="revision-control-log"><br />
Revision Control Log</h1>
<table style="width:100%;">
<colgroup>
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 64%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Item #</strong></th>
<th><strong>Rev #</strong></th>
<th><strong>Change Description</strong></th>
<th><strong>Date</strong></th>
<th><strong>Author Initials</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>1.0</td>
<td>Initial Creation</td>
<td>28FEB13</td>
<td>JJW</td>
</tr>
</tbody>
</table>
